package {{.PackageName}}

import (
	"github.com/joshuapare/kubede/backend/services"
	"github.com/joshuapare/kubede/backend/services/resources"
	"go.uber.org/zap"

  {{if eq .ImportPath "apiextensions" }}
  k8s.io/apiextensions-apiserver/pkg/apis/apiextensions
  {{else}}
	k8sapi "k8s.io/api/{{.ImportPath}}"
  {{end}}
)

// {{.ResourceName}}Service is a service for managing {{.ResourceName}} resources.
// {{.Description}}
type {{.ResourceName}}Service struct {
	resources.NamespacedResourceService[*k8sapi.{{.ResourceName}}]
}

// New{{.ResourceName}}Service creates a new instance of {{.ResourceName}}Service.
//
//nolint:funlen // autogenerated code that's required for each resource
func New{{.ResourceName}}Service(
	logger *zap.SugaredLogger,
	publisher *services.ClusterContextPublisher,
	stateChan chan<- services.ResourceStateEvent,
) *{{.ResourceName}}Service {
	return &{{.ResourceName}}Service{
		NamespacedResourceService: *resources.NewNamespacedResourceService[*k8sapi.{{.ResourceName}}](
			logger,
			k8sapi.SchemeGroupVersion.WithResource("{{.SGVRName}}"),
			publisher,
			stateChan,
		),
	}
}
